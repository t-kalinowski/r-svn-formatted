There are a very few to the source code of zlib-1.2.4 used here.

- zconf.h includes R's config.h

tystie% diff -u zconf.h.in zconf.h
--- zconf.h.in	2010-02-21 22:38:24.000000000 +0000
+++ zconf.h	2010-04-15 12:00:37.000000000 +0100
@@ -8,6 +8,9 @@
 #ifndef ZCONF_H
 #define ZCONF_H
 
+#ifdef HAVE_CONFIG_H
+#include <config.h>
+#endif
 /*
  * If you *really* need a unique prefix for all types and library functions,
  * compile with -DZ_PREFIX. The "standard" zlib should be compiled without it.
@@ -360,7 +363,7 @@
    typedef Byte       *voidp;
 #endif
 
-#ifdef HAVE_UNISTD_H    /* may be set to #if 1 by ./configure */
+#ifdef HAVE_UNISTD_H
 #  define Z_HAVE_UNISTD_H
 #endif
 
