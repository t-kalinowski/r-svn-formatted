#!/bin/sh
# Shell wrapper for R executable.

RHOME=R_HOME_DIR
export RHOME

ARG=$1
case ${ARG} in
    RHOME)
	echo ${RHOME}; exit 0 ;;
    CMD)
	shift; PATH=${PATH}:${RHOME}/cmd:${RHOME}/etc exec $* ;;
    BATCH|COMPILE|INSTALL|REMOVE|SHLIB)
	shift; exec sh ${RHOME}/etc/${ARG} $* ;;
    -d|--debugger)
	exec $2 ${RHOME}/bin/R.binary ;;
    -h|--help|-\?)
        echo "Usage:  R [OPTIONS] [< INFILE] [> OUTFILE]"
        echo ""
        echo "Options:"
        echo "  --save                     Do save data sets at the end of the session."
        echo "  --no-save                  Don't save them."
        echo "  --restore                  Do restore previously saved data sets at startup."
        echo "  --no-restore               Don't restore them."
        echo "  --no-readline              Don't use readline for command-line editing."
        echo "  --no-site-file             Don't read the site-wide Rprofile."
        echo "  --no-init-file             Don't read the .Rprofile or ~/.Rprofile files."
        echo "  --vsize N                  Set the vector heap size to N megabytes."
        echo "  --nsize N                  Set the number of cons cells to N."
        echo "  -h, --help, -?             Print short help message and exit."
        echo "  -q, --quiet, --silent      Make R run as quietly as possible."
        echo "  --version                  Print version info and exit."
	echo "  --verbose                  Print more information about progress."
        echo "  -d NAME, --debugger NAME   Run R through debugger NAME."
	echo ""
	echo "Report bugs to R-bugs@biostat.ku.dk."
	exit 0 ;;
esac	

# Default Printer Paper Size
# Choose one of the following
# R_PAPERSIZE="a4"
# R_PAPERSIZE="letter"
# R_PAPERSIZE="none"
R_PAPERSIZE=${R_PAPERSIZE-@R_PAPERSIZE@}
export R_PAPERSIZE

# Default Print Command
# Choose one of the following
# R_PRINTCMD="lpr"
# R_PRINTCMD="lp"
R_PRINTCMD=${R_PRINTCMD-@R_PRINTCMD@}
export R_PRINTCMD

LATEX=${LATEX-@LATEX@}
DVIPS=${DVIPS-@DVIPS@}
export LATEX DVIPS

exec ${RHOME}/bin/R.binary @R_BATCHSAVE@ $*
