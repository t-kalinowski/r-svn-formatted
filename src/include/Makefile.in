#
# ${R_HOME}/src/include/Makefile

VPATH = @srcdir@
srcdir = @srcdir@
top_srcdir = @top_srcdir@

top_builddir = ../..
subdir = src/include

include $(top_builddir)/Makeconf

distdir = $(top_builddir)/$(PACKAGE)-$(VERSION)/$(subdir)
DISTFILES = $(shell cd $(srcdir) && ls Makefile.in Platform.h.in *.h)

SRC_HEADERS = S.h S_compat.h f2c.h Arith.h Complex.h Error.h Errormsg.h \
	 Fortran.h Applic.h Blas.h Linpack.h Mathlib.h Memory.h PrtUtil.h \
	 Random.h Rinternals.h Utils.h
OBJ_HEADERS = Platform.h

all: R

R: Platform.h FFDecl.h FFTab.h
	@$(MKINSTALLDIRS) $(top_builddir)/include
	@for f in $(SRC_HEADERS); do \
	  $(INSTALL_DATA) $(srcdir)/$$f $(top_builddir)/include; \
	done
	@for f in $(OBJ_HEADERS); do \
	  $(INSTALL_DATA) $$f $(top_builddir)/include; \
	done

Platform.h: $(top_srcdir)/date-stamp
	@cd $(top_builddir) && $(MAKE) src/include/Platform.h
	@touch $@

FFDecl.h FFTab.h:: $(top_srcdir)/src/appl/ROUTINES
	$(top_srcdir)/aux/GETSYMBOLS

mostlyclean:
clean:
distclean:
	@rm -f GETSYMBOLS Makefile Platform.h FFDecl.h FFTab.h
maintainer-clean: distclean

install install-strip uninstall::

distdir: $(DISTFILES)
	@for f in $(DISTFILES); do \
	  test -f $(distdir)/$${f} \
	    || ln $(srcdir)/$${f} $(distdir)/$${f} 2>/dev/null \
	    || cp -p $(srcdir)/$${f} $(distdir)/$${f}; \
	done
