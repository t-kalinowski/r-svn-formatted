#
# ${R_HOME}/src/library/Recommended/Makefile

VPATH = @srcdir@
srcdir = @srcdir@
top_srcdir = @top_srcdir@

top_builddir = ../../..
subdir = src/library/Recommended

include $(top_builddir)/Makeconf

distdir = $(top_builddir)/$(PACKAGE)-$(VERSION)/$(subdir)
DISTFILES = Makefile.in .cvsignore
R = R_LIBS= $(top_builddir)/bin/R

## foo.ts is the timestamp for package foo
## foo_tgz is a symlink to foo_x.y-z.tar.gz in the source dir

## For developers: A shell script, tools/rsync-recommended, updates
## packages from the CRAN master directory. 

OBJECTS=$(R_PKGS_RECOMMENDED:=.ts)

CLEANFILES = $(OBJECTS)
DISTCLEANFILES = Makefile

.SUFFIXES:
.SUFFIXES: _tgz .ts

all: Makefile R @USE_RECOMMENDED_PACKAGES_TRUE@ $(OBJECTS)

Makefile: $(srcdir)/Makefile.in $(top_builddir)/config.status
	@cd $(top_builddir) && $(SHELL) ./config.status $(subdir)/$@

_tgz.ts:
	$(R) CMD INSTALL $<
	@touch $@

## survival needs to be installed before boot
boot.ts: survival.ts boot_tgz

R docs:

install: installdirs
installdirs:
install-strip: install

uninstall:

mostlyclean: clean
clean:
	-@test -z "$(CLEANFILES)" || rm -f $(CLEANFILES)
distclean: clean
	-@test -z "$(DISTCLEANFILES)" || rm -f $(DISTCLEANFILES)
maintainer-clean: distclean

distdir: $(DISTFILES)
	@for f in $(DISTFILES) `cd $(srcdir) && ls *.tar.gz *_tgz`; do \
	  test -f $(distdir)/$${f} \
	    || ln $(srcdir)/$${f} $(distdir)/$${f} 2>/dev/null \
	    || cp -p $(srcdir)/$${f} $(distdir)/$${f}; \
	done
